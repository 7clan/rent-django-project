{% extends "base.html" %}
{% load static %}

{% block content %}
<h2>All Floors</h2>
<ul>
    {% for floor in all_floors %}
        <li>Floor {{ floor.number }}</li>
        <ul>
            {% for apartment in floor.apartments.all %}
                <li>Apartment {{ apartment.id }} - Renter: {% if apartment.renter %}<a href="{{ apartment.renter.get_absolute_url }}">{{ apartment.renter.name }}</a>{% else %}â€”{% endif %}</li>
            {% endfor %}
        </ul>
    {% endfor %}
</ul>

<h2>Add New Floor</h2>
<form class="manual-form" action="{% url 'floor-page' %}" method="post">
    {% csrf_token %}
    <label for="number_input">Floor Number (manual):</label>
    <input id="number_input" name="number" type="number" placeholder="Enter floor number" required>
    <input type="hidden" name="ac" value="add_floor">
    <button type="submit">Add Floor</button>
</form>

<h2>Add New Apartment</h2>
<form class="manual-form" action="{% url 'floor-page' %}" method="post">
    {% csrf_token %}
    <label for="floor_select">Choose Floor (manual):</label>
    <select id="floor_select" name="floor" required>
        <option value="">Select floor</option>
        {% for floor in all_floors %}
            <option value="{{ floor.id }}">Floor {{ floor.number }}</option>
        {% endfor %}
    </select>
    <input type="hidden" name="ac" value="add_apartment">
    <button type="submit">Add Apartment</button>
</form>

<h2>Add New Renter</h2>
<form class="manual-form" action="{% url 'floor-page' %}" method="post">
    {% csrf_token %}
    <label for="renter_name">Name (manual):</label>
    <input id="renter_name" name="name" type="text" placeholder="Enter renter name" required>

    <label for="renter_email">Email (manual):</label>
    <input id="renter_email" name="email" type="email" placeholder="Enter email address" required>

    <label for="renter_phone">Phone (manual):</label>
    <input id="renter_phone" name="phone" type="text" placeholder="Enter phone number" required>

    <label for="apartment_select">Apartment (manual):</label>
    <select id="apartment_select" name="apartment" required>
        <option value="">Select apartment</option>
        {% for apt in all_apartments %}
            <option value="{{ apt.id }}">Apartment {{ apt.id }} (Floor {{ apt.floor.number }})</option>
        {% endfor %}
    </select>

    <label for="renter_floor">Floor (manual):</label>
    <select id="renter_floor" name="floor" required>
        <option value="">Select floor</option>
        {% for floor in all_floors %}
            <option value="{{ floor.id }}">Floor {{ floor.number }}</option>
        {% endfor %}
    </select>

    <label for="renter_start_date">Start Date (manual):</label>
    <input id="renter_start_date" name="start_date" type="date" placeholder="Start date" required>

    <div id="expected_info" style="margin-top:10px; font-weight:bold; color:#333;"></div>

    <input type="hidden" name="ac" value="add_renter">
    <button type="submit">Add Renter</button>
</form>

<script src="{% static 'process/login.js' %}"></script>
<script src="{% static 'process/floor.js' %}"></script>
{% endblock %}